# 重要術語

1. LUT 或 SICE
LUT 或 SICE 是組成了 FPGA 的區域 它的數量有限, 當它用完時代表設計太大

2. RAM 或 Block RAM
FPGA 中的内存

3. Latency 延遲
- 設計產生结果所需的時脈頻率
- 循環的延遲是一次迭代所需的時脈頻率

4. Initiation Interval 或 II 或 Interval 間隔

- 在接受新資料之前必須執行的時脈頻率
跟延遲不一樣 如果函數是流水線的, 許多資料會同時流過它。延遲是一個資料被推入後彈出的時間, 而時間間隔决定了資料可以被推入的速率

- 循環的間隔是可以開始循環迭代的最大速率，以時脈頻率為單位

![說明圖](/img/說明圖.png)

左邊是函數 右邊是循環 左邊的時間間隔(在接收新資料前)是 3 個時脈頻率，右邊循環的間隔則是一個時脈頻率；對於左邊的延遲是這個函數產生結果的時脈頻率數，是 func_C 運行完畢產生的周期數，為 5 個時脈頻率，右邊循環的延遲是一次迭代所需的時鐘數，是 4 個時脈頻率。

# 重要指令

- Functions-函數
- Loops-循環
- Various-所有都適合
- Arrays-陣列
- Parameters-參數


| 指令 | 作用範圍 | 說明 |
| :----: | :----: | :----: |
| PIPELINE 流水線指令 | Functions, Loops | 单元格 |
| 单元格 | 单元格 | 单元格 |


就是使輸入更頻繁的傳给函數或循環。流水線後的函數或循環可以每 N 个时钟周期处理一次新输入，其中 N 是启动间隔（Initiation Interval）。'II' 默认为 1，是 HLS 应针对的启动间隔（即尝试将新数据项输入管道的速度应该多快）。

UNROLL

loops

创建循环的因子副本，让其并行执行（如果满足数据流依赖性）。但是会浪费资源（以资源换取速度）。尽可能将程序展开以提高速度。

ALLOCATION

Various

限制某事物的实例数。例如，如果只想在另一个函数 toplevel 中获得函数 foo 的三个副本，请使用位置 toplevel、限制设置为 3、实例设置为 foo、类型设置为“function”的分配。这也适用于特定的运算。

ARRAY_MAP

Arrays

将多个较小的阵列映射成一个较大的阵列，以牺牲访问时间为代价来节省访问逻辑或 BRAM。'instance' 可以设置为任何未使用的名称。ARRAY_MAP 对同一个实例使用多个 来告诉 HLS 创建一个名为“instance”的新数组，其中包含所有较小的数组。保留“偏移”未设置。请注意，有些人在将三个或更多初始化数组映射到单个 RAM 时遇到了此指令引起的错误。如果在仿真和实现的设计之间遇到行为差异，请尝试删除此指令。

ARRAY_PARTITION

Arrays

将一个大数组拆分为多个较小的数组（与 ARRAY_MAP 相反）。这对于增加并行访问的可能性很有用。如果“type”是“block”，则源数组将分成 block。如果它是“cyclic”，那么元素将被交错到目标数组中。在这两种情况下，“factor 因子”都是要创建的较小数组的数量。如果 'type' 是 'complete' 则忽略 'factor' 并且阵列被完全分割成组件寄存器，因此不使用任何 Block RAM。

DATAFLOW

Functions

见下文

INLINE

Functions

该指令不是将函数视为单个硬件单元，而是在每次调用 HLS 时将函数内联。这是以硬件为代价增加了潜在的并行性。如果 'recursive' 为真，则内联函数调用的所有函数也被视为标有 INLINE。

INTERFACE

Function，parameters

告诉 HLS 如何在函数之间传递参数。这在顶层函数中至关重要，因为它定义了设计的引脚排列。在 EMBS 中，我们有一个应该坚持使用的模板（上图）。

LATENCY

Functions, loops

HLS 通常会尝试在综合时实现最小延迟。如果使用此指令指定更大的最小延迟，HLS 将“pad out”函数或循环并减慢一切。这有助于资源共享（减少资源），并且对于创建延迟很有用。如果 HLS 无法达到要求的延迟，它将发出警告。

LOOP_FLATTEN

loops

将嵌套循环展平为单个循环。应用于 最里面的 循环。如果成功，将生成更快的硬件代码。

LOOP_TRIPCOUNT

loops

如果循环具有可变的循环边界，HLS 将不知道它需要多少次迭代。这意味着它无法为设计延迟提供明确的值。这允许我们为设计指定循环的最小、平均和最大行程计数（迭代次数）。这只会影响报告，不会影响硬件代码生成。

RESOURCE

Various

这用于指定应使用特定硬件资源来实现源代码元素。指定是否应使用 BRAM 或 LUT 实现 ARRAY。见下文详解。

